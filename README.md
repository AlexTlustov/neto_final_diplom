# Дипломный проект профессии «Python-разработчик: расширенный курс»

## Backend-приложение для автоматизации закупок

### Цель дипломного проекта

Создадите и настроите проект по автоматизации закупок в розничной сети, проработаете модели данных, импорт товаров, API views.

Вам нужно:

* разработать backend для сервиса заказа товаров,
* усовершенствовать навыки работы с Django ORM через проработку моделей товаров и связанных сущностей,
* реализовать импорт и экспорт товаров,
* внедрить систему управления заказами,
* оптимизировать методы с использованием асинхронности,
* освоить работу со сторонними библиотеками и фреймворками,
* подготовить документацию к проекту,
* использовать AI инструменты для решения задач.

-----

## Чеклист готовности к работе над проектом

1. Изучить материалы лекции подготовки к дипломной работе.
2. Подготовить компьютер или виртуальную машину с ОС Linux или MacOS (не рекомендуем использовать Windows).
3. Установить IDE с поддержкой Python: Pycharm, VS Code или др.
4. Установить версию Python 3.10 или более позднюю.
5. Установить AI-плагин из списка:
- [Machinet](https://www.machinet.net/),
- [Codeium](https://codeium.com/),
- [Tabnine](https://www.tabnine.com/),
- [Amazon Сodewhisperer](https://aws.amazon.com/ru/codewhisperer/),
- [Mutable.AI](https://mutable.ai/pricing/),
- [Google Duet-AI](https://cloud.google.com/duet-ai/docs/developers/use-in-ide).

-----

## Инструкция к работе над проектом

### Общее описание приложения

Приложение предназначено для автоматизации закупок в розничной сети через REST API.

**Внимание! Все взаимодействие с приложением ведется через API запросы. 
Реализация фронтенд-приложения возможна только по желанию обучающегося**

**Пользователи сервиса:**

1. Клиент (покупатель):

- делает ежедневные закупки по каталогу, в котором представлены товары от нескольких поставщиков,
- в одном заказе можно указать товары от разных поставщиков,
- пользователь может авторизироваться, регистрироваться и восстанавливать пароль через API.
    
2. Поставщик:

- через API информирует сервис об обновлении прайса,
- может включать и отключать приём заказов,
- может получать список оформленных заказов (с товарами из его прайса).

### Задача

Необходимо разработать backend-часть сервиса заказа товаров для розничных сетей на Django Rest Framework.

**Базовая часть:**
* разработка сервиса под готовую спецификацию (API),
* возможность добавления настраиваемых полей (характеристик) товаров,
* импорт товаров,
* отправка накладной на email администратора (для исполнения заказа),
* отправка заказа на email клиента (подтверждение приёма заказа).

**Продвинутая часть (необязательная к выполнению, не влияет на получение зачёта):**
* экспорт товаров,
* админка заказов (проставление статуса заказа и уведомление клиента),
* выделение медленных методов в отдельные асинхронные функции (email, импорт, экспорт).

_Обратите внимание!_

В репозитории приведён готовый пример с базовой частью проекта. Вы можете работать с проектом, выбрав один из двух вариантов:
- разработать свою версию, исходя из текстового описания базовой части проекта,
- взять за основу пример из репозитория, изучить его и выполнить продвинутую часть задания.

Вы можете интерпретировать текстовое описание проекта по-своему. Работа над дипломом - это в первую очередь творческий процесс. Главное - отсутствие плагиата (не сдавать работы других студентов).

### Исходные данные для проекта
 
1. Общее описание сервиса
1. [Спецификация (API) - 1 шт.](./reference/screens.md)
1. [Файлы yaml для импорта товаров - 1 шт.](./data/shop1.yaml)
1. [Базовый пример API Сервиса для магазина](./reference//netology_pd_diplom/) 

## Этапы разработки

Разработку Backend рекомендуется разделить на следующие этапы:

Базовая часть:
- [X] 1. [Создание и настройка проекта](./reference/step-1.md)
- [X] 2. [Проработка моделей данных](./reference/step-2.md)
- [X] 3. [Реализация импорта товаров](./reference/step-3.md)
- [X] 4. [Реализация API views](./reference/step-4.md)
- [X] 5. [Полностью готовый backend](./reference/step-5.md)

Продвинутая часть (по желанию, если базовая часть полностью готова):

- [X] 6. [Реализация forms и views админки склада](./reference/step-6-adv.md)
- [X] 7. [Вынос медленных методов в задачи Celery](./reference/step-7-adv.md)

### Запросы в файле:
 - requests.http

### Чтобы запустить проект необходимо:

- Установить зависимости:

```
pip install -r requirements.txt
```
- Создать базу данных **PostgreSQL**:
```
createdb -U postgres orders_db
```
- Создать файл .env и определить в нем следующие переменные окружения:

| Имя переменной   | Описание значения переменной                                                                        |
|------------------|-----------------------------------------------------------------------------------------------------|
| DEBUG            | Режим отладки проекта, по умолчанию True или 1                                                      |
| SECRET_KEY       | Секретный ключ проекта, любой произвольный набор символов                                           |
| ALLOWED_HOSTS    | Разрешенный список хостов (в режиме DEBUG=True **localhost** или **127.0.0.1** или **Все(*)**)      |
| POSTGRES_ENGINE  | Вид базы данных, по умолчанию *django.db.backends.postgresql*                                       |
| POSTGRES_DB      | Имя базы данных, по умолчанию *orders_db*                                                           |
| POSTGRES_USER    | Имя пользователя для подключения к базе данных, по умолчанию *postgres*                             |
| POSTGRES_PASSWORD| Пароль пользователя для подключения к базе данных, по умолчанию *postgres*                          |
| POSTGRES_HOST    | Имя хоста для подключения проекта к БД, по умолчанию *127.0.0.1*                                    |
| POSTGRES_PORT    | Порт для подключения к БД, по умолчанию 5432                                                        |
| EMAIL_HOST       | Почтовый сервер для отправки писем пользователю, для mail.ru (smtp.mail.ru)                         |
| EMAIL_PORT       | Порт почтового сервера, для mail.ru 2525                                                            |
| EMAIL_HOST_USER  | Почтовый адрес пользователя                                                                         |
| EMAIL_HOST_PASS  | Пароль от приложения на почтовом сервере пользователя                                               |
| REDIS_HOST       | Установить настройки Redis. Запуск по умолчанию из docker

- Выполнить миграции:

```
manage.py makemigrations && manage.py migrate
manage.py createsuperuser
```
- При необходимости загрузить тестовые данные в базу данных:

```
python manage.py loaddata --format=yaml fixtures/shop1.yaml
```
- Выполнить команду:

```
python manage.py runserver
```
- Прописать адрес Redis сервера в settings.py 
- Запуск Redis docker-compose up redis

- Выполнить команду во втором терминале:

```
celery -A orders worker -l INFO
```
- Запустить тесты:
```
pytest
```
- Создать файл настроек DRF-Spectacular
```
python ./manage.py spectacular --color --file schema.yml
```


